{% include 'header.html' %}
<div class="register">
	<table width="800" border="0" cellspacing="0" cellpadding="0">
		<tr>
			<th width="150">友盟账户</th>
			<td><input type="text" class="input_text" id="userName" name=" " value="" /><span class="notice">请填写友盟账户(已注册)</span></td>
		</tr>
		<tr>
			<th>密码</th>
			<td><input type="password" class="input_text" id="userPwd" name=" " value="" /><span class="notice">请填写密码</span></td>
		</tr>
		<!--<tr>
			<th>确认密码</th>
			<td><input type="password" class="input_text" id="userRepwd" name=" " value="" /><span class="notice">两次密码输入不一致</span></td>
		</tr>
		<tr>
			<th>应用名称</th>
			<td><input type="text" class="input_text" name=" " id="appName" value="" /><span class="notice">应用名称不能为空</span></td>
		</tr>
		<tr>
			<th>应用appstore地址</th>
			<td><input type="text" class="input_text" name=" " id="appUrl" value="" /><span class="notice">应用appstore地址不能为空</span></td>
		</tr>
		<tr>
			<th>联系人邮箱</th>
			<td><input type="text" class="input_text" name=" " id="email" value="" /><span class="notice">邮箱不能为空</span></td>
		</tr>
		<tr>
			<th>QQ（可选）</th>
			<td><input type="text" class="input_text" name=" " id="qq" value="" /></td>
		</tr>-->
		<tr>
			<th></th>
			<td><input type="button"  class="btn" name=" " id="submit" value="登&emsp;录" /><a href="http://www.umtrack.com">取消</a></td>
		</tr>
	</table>
</div>
{% include 'who_used.html'%}
{% include 'bottom.html'%}
</body>
<script src="/javascripts/jquery.min.js" type="text/javascript"></script>
<script src="/javascripts/ios_channels/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>
<script src="/javascripts/ios_channels/jquery.blockUI-2.39.js" type="text/javascript"></script>
<script src="/javascripts/ios_channels/pageload.js" type="text/javascript"></script>
<script type="text/javascript">
    $(".input_text").change(function(e) {
        checkVal(this);
    });
    $("#submit").click(function(){
    	var error = 0;
    	$(".input_text").each(function(e,i){
    		res = checkVal(this);
    		if(res != true){
    			error++;
    		}
    	});
    	if(error == 0){
    		var val;
	     	$(".input_text").each(function(e,i){
	     		val = val?val+"&":"";
	     		val = val+$(this).attr("id")+"="+$.trim($(this).val());
	    	});
			$.ajax({
				type:'POST',
				url:"/users/",
				data: val,
				success: function(data){
					if(data == "1"){
						window.location.href = "/apps/";
					}else{
						if(data == "0"){
							alert_msg("用户名或密码错误！");
						}else{
							alert_msg("非法操作！");
						}
					}

				}
				
			});		   		
			/*$.getJSON(window.ajaxBaseUrl+"/users/login/?"+val+"&callback=?",
				function(data){
			});*/
    	}
    });
    function checkVal(input){
    	var id = $(input).attr("id");
    	var value = $(input).val();
    	var res = true;
    	switch(id){
    		case "userName":
				if(!value.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{1,4})+$/i)){
	    			 
	    			res = "请输入正确邮箱帐号";
	    		}
	    		if(!value){
	    			res = "帐号不能为空";
	    		}
	    		break;
    		case "userPwd":
	    		if(!value){
	    			res = "密码不能为空";
	    		}
	    		break;
    	}
    	if(res == true){
    		$(input).next(".notice").hide();
    	}else{
    		$(input).next(".notice").text(res).show();
    	}
    	return res;
    }
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34123762-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</html>
